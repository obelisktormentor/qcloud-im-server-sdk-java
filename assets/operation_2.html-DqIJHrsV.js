import{_ as s,c as n,o as a,e}from"./app-ZP_PHHWl.js";const t={},p=e(`<h1 id="运营管理" tabindex="-1"><a class="header-anchor" href="#运营管理"><span>运营管理</span></a></h1><h2 id="拉取运营数据" tabindex="-1"><a class="header-anchor" href="#拉取运营数据"><span>拉取运营数据</span></a></h2><p>App 管理员可以通过该接口拉取最近 30 天的运营数据，可拉取的字段见下文可拉取的运营字段。</p><p>使用示例：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">GetAppInfoRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetAppInfoRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> requestFields <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;ChainIncrease&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ChainDecrease&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">request<span class="token punctuation">.</span><span class="token function">setRequestField</span><span class="token punctuation">(</span>requestFields<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">GetAppInfoResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">getAppInfo</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="下载最近消息记录" tabindex="-1"><a class="header-anchor" href="#下载最近消息记录"><span>下载最近消息记录</span></a></h2><p>App 管理员可以通过该接口获取 App 中最近 7 天中某天某小时的所有单发或群组消息记录的下载地址。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><ul><li>下载消息记录里的图片、语音、文件和短视频，此功能仅适用于 4.X 版本 IM SDK，可通过聊天记录中的 URL 字段进行下载。如您使用 2.X 或 3.X 版本的 IM SDK，您将无法通过该方法获取到以上信息，如您需要此功能，请您升级至 4.X 版本。</li><li>消息记录以日志文件形式保存并使用 GZip 压缩，通过该接口获取到下载地址后，请自行下载并处理；消息记录文件每小时产生一次，例如 0 点（00:00~00:59）的数据在 01:00 后开始处理，一般 1 小时内处理完毕（消息较多则处理时间较长）；文件有效期 7 天，无论是否下载过，都会在 7 天后删除，被删除后不支持重新导出；获取到的下载地址存在有效期，请在过期前进行下载，若地址失效，请通过该接口重新获取。</li><li>此接口仅用于下载最近 7 天的聊天记录文件，用于备份或数据统计等。不建议使用该接口用于线上实时业务。</li></ul></div><p>使用示例：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">GetHistoryRequest</span> request <span class="token operator">=</span> <span class="token class-name">GetHistoryRequest</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">chatType</span><span class="token punctuation">(</span><span class="token class-name">ChatType</span><span class="token punctuation">.</span><span class="token constant">C2C</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">msgTime</span><span class="token punctuation">(</span><span class="token string">&quot;2015120121&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">GetHistoryResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">getHistory</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取服务器-ip-地址" tabindex="-1"><a class="header-anchor" href="#获取服务器-ip-地址"><span>获取服务器 IP 地址</span></a></h2><p>基于安全等考虑，您可能需要获知服务器的 IP 地址列表，以便进行相关限制。App 管理员可以通过该接口获得 SDK、第三方回调所使用到的服务器 IP 地址列表或 IP 网段信息。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>此接口仅支持获取中国大陆地区的所有 IM 接入方式的 IP 地址或 IP 网段信息。</p></div><p>使用示例：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">GetIpListRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetIpListRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">GetIpListResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>op<span class="token operator">~</span>eration<span class="token punctuation">.</span><span class="token function">getIpList</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="聊天文件封禁" tabindex="-1"><a class="header-anchor" href="#聊天文件封禁"><span>聊天文件封禁</span></a></h2><p>本接口用于封禁聊天消息中的富媒体文件。</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>仅针对富媒体消息中使用 IM SDK 上传的文件有效，为了确保功能正常使用，请将终端 SDK 更新至 4.9.x 版本及以上，Web SDK 更新至 v2.0.0 版本及以上。</p></div><p>使用示例：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">ForbidIllegalObjectRequest</span> request <span class="token operator">=</span> <span class="token class-name">ForbidIllegalObjectRequest</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">rawUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://cos.ap-shanghai.myqcloud.com/005f-shanghai-360-shared-01-1256635546/76aa-1400152839/2f3b-2273451635034382/699eb4ee5ffa9aeb70627958766f2927-142072.jpg&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">ForbidIllegalObjectResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">forbidIllegalObject</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="聊天文件解封" tabindex="-1"><a class="header-anchor" href="#聊天文件解封"><span>聊天文件解封</span></a></h2><p>本接口用于解封聊天消息中的富媒体文件。</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>仅针对富媒体消息中使用 IM SDK 上传的文件有效，为了确保功能正常使用，请将终端 SDK 更新至 4.9.x 版本及以上，Web SDK 更新至 v2.0.0 版本及以上。</p></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">AllowBannedObjectRequest</span> request <span class="token operator">=</span> <span class="token class-name">AllowBannedObjectRequest</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">rawUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://cos.ap-shanghai.myqcloud.com/005f-shanghai-360-shared-01-1256635546/76aa-1400152839/2f3b-2273451635034382/699eb4ee5ffa9aeb70627958766f2927-142072.jpg&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">AllowBannedObjectResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">allowBannedObject</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="聊天文件签名" tabindex="-1"><a class="header-anchor" href="#聊天文件签名"><span>聊天文件签名</span></a></h2><p>本接口用于获取聊天消息中的富媒体文件 FULL_CONTROL 权限的 URL 签名以及文件状态信息，默认有效期 15 分钟。一般 SDK 下发的文件 URL 为普通账号签名，违规封禁后，可以使用 FULL_CONTROL 权限的 URL 签名来查看封禁的资源。</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>仅针对富媒体消息中使用 IM SDK 上传的文件有效，为了确保功能正常使用，请将终端 SDK 更新至 4.9.x 版本及以上，Web SDK 更新至 v2.0.0 版本及以上。</p></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">RawUrlItem</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RawUrlItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">item<span class="token punctuation">.</span><span class="token function">setRawUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://cos.ap-shanghai.myqcloud.com/98ec-shanghai-007-privatev2-01-1256635546/0345-1400187352/0612-yyy/9a0f4c42d208ccfb5aa47c29284aefc6.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">item<span class="token punctuation">.</span><span class="token function">setResourceId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RawUrlItem</span><span class="token punctuation">&gt;</span></span> rawUrls <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">GetCosSigRequest</span> request <span class="token operator">=</span> <span class="token class-name">GetCosSigRequest</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">rawUrls</span><span class="token punctuation">(</span>rawUrls<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">GetCosSigResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">getCosSig</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,28),l=[p];function c(i,o){return a(),n("div",null,l)}const r=s(t,[["render",c],["__file","operation_2.html.vue"]]),d=JSON.parse('{"path":"/guide/operation_2.html","title":"运营管理","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"拉取运营数据","slug":"拉取运营数据","link":"#拉取运营数据","children":[]},{"level":2,"title":"下载最近消息记录","slug":"下载最近消息记录","link":"#下载最近消息记录","children":[]},{"level":2,"title":"获取服务器 IP 地址","slug":"获取服务器-ip-地址","link":"#获取服务器-ip-地址","children":[]},{"level":2,"title":"聊天文件封禁","slug":"聊天文件封禁","link":"#聊天文件封禁","children":[]},{"level":2,"title":"聊天文件解封","slug":"聊天文件解封","link":"#聊天文件解封","children":[]},{"level":2,"title":"聊天文件签名","slug":"聊天文件签名","link":"#聊天文件签名","children":[]}],"git":{"updatedTime":1684979652000,"contributors":[{"name":"Yang Libin","email":"szuyanglb@outlook.com","commits":6},{"name":"怡蘅","email":"hongyihengg@gmail.com","commits":1}]},"filePathRelative":"guide/operation_2.md"}');export{r as comp,d as data};
